pipeline:
  build-server:
    image: mcr.microsoft.com/dotnet/core/sdk:3.1
    commands:
      - dotnet restore
      - dotnet publish -c Release -o MorphicServer

  run-tests:
    image: mcr.microsoft.com/dotnet/core/sdk:3.1
    environment:
      APPSETTINGS_FILENAME:  "appsettings.Integration.json"
    commands:
      - dotnet test
    
services:
  mongo:
    image: mongo
    environment: []
